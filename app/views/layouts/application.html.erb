<!DOCTYPE html>
<html>
<head>
  <title>Snippet Monkey</title>
  <style>.forum_hover { background-color: #380606; }</style>
  <%= favicon_link_tag 'favicon.ico', :rel => 'shortcut icon', :type => 'image/png' %>

  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
  <![endif]-->
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <%= csrf_meta_tags %>
   <%= metamagic :title => "Snippet Monkey", :description => "Start storing the URLs or Blogs or Snippets which helped you to resolve a bug while app development.", :keywords => %w(snippet code programming stackoverflow testing development application web technology blog url) %>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body onload="prettyPrint()">
	
  <!-- Navigation Starts here -->
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a id="logo" class="brand" href="#"><%= image_tag "monkey_logo.png", :width => "70", :height => "70"%>Snippet Monkey</a>
        <%if user_signed_in?%>
			<%= render 'layouts/navigation'%>
		<%end%>
      </div>
    </div>
  </div>
  <br />
  
  <!-- Container layout Starts here -->
    <div class="container-fluid" style="padding-top: 130px">
	    <div class="row-fluid">
	    	
	    	<!--Sidebar content-->
		    <div class="span2">
		    	<%unless current_user.blank?%>
		    	
			    	<!-- Upload Image is here -->
					<p><a data-toggle="modal" href="#upload_modal" id="avatar">
	  	    		<%if current_user.avatar_url%>
	  	    			<%= image_tag current_user.avatar_url, :width => "120", :height => "120", :alt => "Upload Image", :style => "margin-left: 2px; padding:4px; border:1px #999999 solid; box-shadow: 0 4px 9px -3px grey;"%>
	  	    		<%else%>
	  	    			<%= image_tag "user_up.png", :width => "120", :height => "120", :alt => "Upload Image"%>
	  	    		<%end%>
	  	    		</a>
	  	    		<h6><strong style="padding-left: 5px">Click To Upload</strong></h6>
	  	    		</p>
	  	    		<hr />
	    			<p>
					<!-- AddThis Follow BEGIN -->
					<p><h6><strong style="padding-left: 5px">Follow Us</strong></h6></p>
					<p>
					<div class="addthis_toolbox addthis_32x32_style addthis_default_style">
					<a class="addthis_button_facebook_follow" addthis:userid="SnippetMonkeyCommunity"></a>
					<a class="addthis_button_twitter_follow" addthis:userid="YOUR-USERNAME"></a>
					<a class="addthis_button_google_follow" addthis:userid="YOUR-USERNAME"></a>
					<a class="addthis_button_pinterest_follow" addthis:userid="YOUR-USERNAME"></a>
					</div>
					<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-511800945f829635"></script>
					<!-- AddThis Follow END -->
					</p>
	    			<!-- Upload Image Modal is here -->
					<div id="upload_modal" class="modal hide fade">
						<div class="modal-header">
						<button class="close" data-dismiss="modal">×</button>
						<h3>Upload User Image</h3>
						</div>
						<div class="modal-body">
							<form name="file"  method="post" action="/users/upload_avatar" class="form-horizontal" enctype="multipart/form-data">
								<p class="help-block">Select Image</p>
								<div class="input-prepend">
									<div class="help-block">
								<p>
									<input class="prependedInput" size="16" type="file" name="user_image">
									<br /><button type="submit" class="btn btn-medium btn-info">Upload</button>
								</p>
								</div>
								</div>
							</form>
						</div>
					</div>
				<%end%>
		    </div>
		    
		    <vr class="leftline"></vr>
		    
		    <!-- Middle container goes here-->
		    <div class="span10">
			    <div class="span10" style="margin-left: -14px;">
					
					<!-- Middle container data-->
				    <%flash.map do |key,value|%>
					    <%if user_signed_in?%>
					    	<%unless value.blank?%>
								<div class="alert alert-<%= key%>">
								  <button type="button" class="close" data-dismiss="alert">×</button>
								  <%case key%>
								  	<%when "info"%>
								  		<%flash_string_text = "Hey Buddy,"%>
								  	<%when "error"%>
								  		<%flash_string_text = "Oops! Some thing wrong :("%>
								  <%end%>
								  <strong><%= flash_string_text%></strong>
								  <%= value%>
								</div>
							<%end%>
						<%else%>
							<div id="alert_error" class="alert alert-error">
							</div>
							<div id="alert_success" class="alert alert-success">
							</div>
						<%end%>
					<%end%>
					 <%if user_signed_in?%>
						<%= yield %>
				   <%else%>
				 	<%= yield :session_out_view%>
				   <%end%>	
			    </div>
			    <vr class="rightline"></vr>
			    
			    <!--Monkey sketch and Chat section-->
			    <div class="span2" style="padding-left: 25px;">
			    	
			    	<!-- Code Monkey section. -->
			    	<div class="row">
				      	<%= image_tag "CodeMonkeySketch.jpg"%>
			      	</div>
			      	<hr />
			      	
			      	<!-- Chat Section -->
			    	<div class="row">
				      	<%if user_signed_in?%>
						    <ul class="nav nav-pills">
						    	<li><span class="label label-success" style="margin-left: 13px">Who's Online on Snippet</span></li>
						    	<%User.show_online_users.each do |user|%>
						    		<li class="disabled"><a href="#"><%= image_tag "online_icon_23.jpg"%>&nbsp;&nbsp;<strong><%= user.full_name%></strong></a></li>
						    	<%end%>
						    </ul>
						<%end%>
			      	</div>	
			      	
			    </div>
			    
		    </div>
	    </div>
	    
	<%= render :partial => 'layouts/filter_form'%>
    </div>

</body>

<hr />

	<!-- Footer Starts here -->

	<footer>
		<div class="container">
	<p>Snippet Monkey.com was crafted by <a href="https://github.com/kannancet" target="_blank">Snippet Team</a> 2013. | <a href=<%= privacy_policy_path%> target="_blank">Site Privacy policy</a> | All snippets are <a href="<%= license_path%>">MIT license.</a> | Built with <a href="http://rubyonrails.org/" target="_blank" title="Ruby on Rails">Ruby on Rails&nbsp;&nbsp;<%= image_tag "rails.png", :width => "32", :height => "32"%></a> </p>
	</div>
      <div class="container">
        <p><strong><h6 style="padding-left:90px;">Copyright © 2013 - Snippet Team. All Rights Reserved</strong>  | <strong>Email</strong> : team.snippet.monkey@gmail.com </p>
      </div>
    </footer>
    
    
</html>

<script>
	document.getElementById("logo").onmouseover = function() {
	    this.style.backgroundColor = "#009ACD";
	}
	document.getElementById("logo").onmouseout = function() {
	    this.style.backgroundColor = "";
	}
</script>
<script>
	$("#alert_info").show();
	$("#alert_error").hide();
	$("#alert_success").hide();
	<%if flash[:account_activation_success]%>
		$("#alert_info").hide();
		$("#alert_error").hide();
		$("#alert_success").show();
		$("#alert_success").html("<%= flash[:account_activation_success]%>")
	<%end%>
	<%if flash[:account_activation_fail]%>
		$("#alert_info").hide();
		$("#alert_error").show();
		$("#alert_error").html("<%= flash[:account_activation_fail]%>")
		$("#alert_success").hide();
	<%end%>
</script>

    <script type="text/javascript">
      $(document).ready(function(){
          var box = null;
          $("input[type='button']").click(function(event, ui) {
              if(box) {
                  box.chatbox("option", "boxManager").toggleBox();
              }
              else {
                  box = $("#chat_div").chatbox({id:"chat_div", 
                                                user:{key : "value"},
                                                title : "test chat",
                                                messageSent : function(id, user, msg) {
                                                    $("#log").append(id + " said: " + msg + "<br/>");
                                                    $("#chat_div").chatbox("option", "boxManager").addMsg(id, msg);
                                                }});
              }
          });
      });
    </script>
